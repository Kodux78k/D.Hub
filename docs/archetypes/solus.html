<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Solus Â· DNA Shader</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: transparent;
      overflow: hidden;
      height: 100%;
    }
    canvas {
      display: block;
    }
    .btn-activate {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: none;
      border: none;
      cursor: pointer;
      z-index: 10;
    }
    .btn-activate img {
      width: 48px;
      height: 48px;
      opacity: 0.85;
      transition: transform 0.2s ease;
    }
    .btn-activate:hover img {
      transform: scale(1.1);
      opacity: 1;
    }
  </style>
</head>
<body>

<canvas id="bg"></canvas>
<button class="btn-activate" onclick="sendActivation()">
  <img src="../icons/Arch-icon-0.png" alt="Ativar">
</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.min.js"></script>

<script>
  const canvasEl = document.getElementById('bg');
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({ canvas: canvasEl, alpha: true, antialias: true });

  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableZoom = false;
  controls.enablePan = false;

  const geometry = new THREE.TorusKnotGeometry(1.2, 0.3, 100, 16);
  const material = new THREE.MeshStandardMaterial({ color: 0x38bdf8, metalness: 0.6, roughness: 0.2 });
  const torusKnot = new THREE.Mesh(geometry, material);
  scene.add(torusKnot);

  const light1 = new THREE.PointLight(0x38bdf8, 1.2, 50);
  light1.position.set(5, 5, 5);
  scene.add(light1);

  const light2 = new THREE.PointLight(0xffffff, 0.4);
  light2.position.set(-5, -3, -5);
  scene.add(light2);

  camera.position.z = 4;

  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });

  function animate() {
    requestAnimationFrame(animate);
    torusKnot.rotation.x += 0.005;
    torusKnot.rotation.y += 0.01;
    renderer.render(scene, camera);
  }
  animate();

  function sendActivation() {
    if (window.parent) {
      window.parent.postMessage({ type: 'ATIVAR_ARQUETIPO', id: 'solus' }, '*');
    }
  }
</script>

</body>
</html>
