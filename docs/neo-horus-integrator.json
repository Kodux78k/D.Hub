{
  "id": "neo-horus-integrator",
  "priority": 40,
  "enabled": true,
  "css": "",
  "js": "(function(){\n  if (window.__NEO_HORUS_INTEGRATOR__) return; window.__NEO_HORUS_INTEGRATOR__=true;\n  const APP_KEY='dualapp:local:url';\n  // UI: add a small floating button to register a local Dual App HTML\n  function addFloatingBtn(){\n    if (document.getElementById('neo-horus-add')) return;\n    const b=document.createElement('button');\n    b.id='neo-horus-add';\n    b.textContent='‚äï DualApp';\n    Object.assign(b.style,{position:'fixed',right:'14px',bottom:'88px',zIndex:'99999',\n      padding:'8px 12px',borderRadius:'12px',border:'1px solid rgba(255,255,255,.18)',\n      background:'linear-gradient(180deg,#14162a,#0f1324)',color:'#cfe9ff',fontWeight:'800',\n      boxShadow:'0 8px 24px rgba(0,0,0,.35)',cursor:'pointer'});\n    const file=document.createElement('input'); file.type='file'; file.accept='.html,.htm'; file.style.display='none';\n    b.onclick=()=>file.click();\n    file.onchange=async (e)=>{\n      const f=e.target.files && e.target.files[0]; if(!f) return;\n      const txt=await f.text();\n      const blob=new Blob([txt],{type:'text/html;charset=utf-8'});\n      const url=URL.createObjectURL(blob);\n      try{ localStorage.setItem(APP_KEY,url); alert('Dual App carregado localmente. V√° em APPS ‚Ä∫ abrir Dual App'); }catch{}\n    };\n    document.body.appendChild(b); document.body.appendChild(file);\n  }\n\n  // Apps: inject a launcher card at render time (mon√≥lito v5 already organizes groups)\n  function injectAppCard(){\n    const q = sel => document.querySelector(sel);\n    const appsView = q('#view-apps .page'); if(!appsView) return;\n    if (document.getElementById('neo-horus-card')) return;\n    const holder = document.createElement('div');\n    holder.className='grid';\n    holder.id='neo-horus-card';\n    holder.innerHTML = `\n      <div class=\"section\">KODUX ‚Ä¢ NEO HORUS</div>\n      <div class=\"grid\">\n        <div class=\"card\" id=\"neo-horus-open\" style=\"cursor:pointer\">\n          <div class=\"icon\">üúÇ</div>\n          <div style=\"flex:1\">\n            <div class=\"title\">Dual App (micro‚Äëfrontend)</div>\n            <div class=\"muted\">Abrir inst√¢ncia do dual app dentro do Mon√≥lito</div>\n            <div class=\"row\">\n              <button class=\"btn\" id=\"neo-horus-open-btn\">Abrir</button>\n              <button class=\"btn\" id=\"neo-horus-clear\">Limpar local</button>\n            </div>\n          </div>\n        </div>\n      </div>`;\n    appsView.appendChild(holder);\n\n    const btnOpen = document.getElementById('neo-horus-open-btn');\n    const btnClear= document.getElementById('neo-horus-clear');\n    btnOpen.onclick = ()=>{\n      const local = localStorage.getItem(APP_KEY) || '';\n      const fallback = '/dual-app/index.html'; // opcional: ajuste seu path hospedado\n      const url = local || fallback;\n      try {\n        // usa viewer do mon√≥lito se existir\n        if (typeof window.openApp === 'function'){\n          window.openApp({ key:'dualapp', title:'Dual App', url, icon:'' });\n        } else {\n          // simples: abre overlay pr√≥prio\n          const v=document.createElement('div'); v.style.cssText='position:fixed;inset:0;z-index:99998;background:#000';\n          v.innerHTML=`<iframe src=\"${url}\" style=\"position:absolute;inset:0;border:0;width:100%;height:100%\" allow=\"autoplay;clipboard-read;clipboard-write\"></iframe>\n          <button id=\"neo-horus-close\" style=\"position:fixed;right:16px;top:16px;z-index:99999;border:1px solid #fff3;border-radius:10px;padding:8px 12px;background:#0f1324;color:#e9ecff;font-weight:800;cursor:pointer\">Fechar</button>`;\n          document.body.appendChild(v);\n          v.querySelector('#neo-horus-close').onclick=()=>v.remove();\n        }\n      } catch(e){ alert('N√£o consegui abrir o Dual App. Hospede o HTML ou carregue um .html local pelo bot√£o ‚äï DualApp.'); }\n    };\n    btnClear.onclick = ()=>{ localStorage.removeItem(APP_KEY); alert('URL local do Dual App apagada.'); };\n  }\n\n  // boot\n  addFloatingBtn();\n  // injeta quando o usu√°rio entra em APPS\n  document.querySelectorAll('[data-nav]').forEach(btn=>{\n    btn.addEventListener('click',()=>{\n      if(btn.dataset.nav==='apps') setTimeout(injectAppCard,150);\n    });\n  });\n  // se j√° estiver em apps\n  if (location.hash.includes('apps')) setTimeout(injectAppCard, 300);\n})();"
}
